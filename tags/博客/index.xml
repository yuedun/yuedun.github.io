<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>博客 on 月盾的个人博客</title>
    <link>https://www.yuedun.wang/tags/%E5%8D%9A%E5%AE%A2/</link>
    <description>Recent content in 博客 on 月盾的个人博客</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 17 Jun 2021 15:38:31 +0800</lastBuildDate><atom:link href="https://www.yuedun.wang/tags/%E5%8D%9A%E5%AE%A2/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>博客迁移至hugo gitpage</title>
      <link>https://www.yuedun.wang/2021/06/blog-move-to-gitpage/</link>
      <pubDate>Thu, 17 Jun 2021 15:38:31 +0800</pubDate>
      
      <guid>https://www.yuedun.wang/2021/06/blog-move-to-gitpage/</guid>
      <description>为什么迁移？ 6月初的时候，3年前买的阿里云服务器到期了，又买了其他服务器，但是只有1年期，于是进行了一番数据，应用迁移，这么一顿操作下来还是挺累的，尤其是在linux上安装mysql，mongodb。 安装后又是连接不上，挺烦的。再想到一年后又是一顿操作，不由得一个激灵。
经过一番的思量后，决定将自建博客迁移至gitpage上。
自建和gitpage优劣对比 首先列出自己博客具备的功能：
 首页 包含最近10篇文章的标题和部分内容，最近发表的5篇，分类，标签，友链 目录 所有文章时间线 留言 自维护留言系统 微博 新浪微博，最近出问题不显示了 速记 简单记录 关于 自我介绍  整体比较简单，没什么复杂功能。而很多静态博客也具备这些功能，而且做的更好，所以基本不会有主要功能的缺失。 在一些细节功能上面确实会有缺失，比如：
 评论功能，数据原来是存在自己服务器上的，gitpage不具备数据存储能力，所以需要对接第三方评论或留言功能。 目录缺失，这点主要由博客主题决定，有些主题是没有目录功能的。 PV/UV统计，同样是由于数据存储的缺失，所以gitpage也没有这样的统计功能，但是可以添加谷歌，百度统计之类的。 自定义功能较弱，只能使用主题提供的页面模式，除非不使用静态博客工具，完全自己开发。  整体来说，除了数据存储功能缺失外，其他都是可以实现的。
迁移过程 将mongodb数据中的博客导出为本地markdown文件。
// mongodb数据转markdown function genMd() { return Blog.find({ status: 1 }, null, { sort: { &amp;#39;_id&amp;#39;: -1 } }) .then(data =&amp;gt; { data.forEach((b) =&amp;gt; { debug(b) let tags = b.tags.split(&amp;#34;,&amp;#34;) let blog = `--- title: &amp;#34;${b.title}&amp;#34; description: &amp;#34;${b.content.replace(/&amp;lt;[^&amp;lt;&amp;gt;]+&amp;gt;/g, &amp;#34;&amp;#34;).replace(/\r\n/g, &amp;#34;&amp;#34;).replace(/\n/g, &amp;#34;&amp;#34;).</description>
    </item>
    
    <item>
      <title>2014-11-11博客突然打不开</title>
      <link>https://www.yuedun.wang/blogdetail/54618bc69579423b407522c8/</link>
      <pubDate>Tue, 11 Nov 2014 04:08:38 +0000</pubDate>
      
      <guid>https://www.yuedun.wang/blogdetail/54618bc69579423b407522c8/</guid>
      <description> 今天早上起来还可以，中午突然就打不开，看了下日志有下面的错误：这是关于mongodb的错误，经过重启部署都每有解决，看后台输出数据库有连接上，但是每次刷新页面的时候就会报这个错误。打开数据库看了下，吓死我了，里面居然没数据了，难道又要经历和上次一样的问题？不能这么坑爹啊！只好无聊的不停刷新，无意间又好了。
 看来BAE还是存在问题，不够稳定。
 at /home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/connection/server.js:485:18 at Server.Base._callHandler (/home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/connection/base.js:442:41) at /home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/db.js:1806:9 at commandHandler (/home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/cursor.js:685:21) at Cursor.close (/home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/cursor.js:959:5) at /home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/cursor.js:685:39 at /home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/cursor.js:159:22 at /home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/db.js:1542:30 at /home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/db.js:1404:28 at /home/bae/app/.bae/node_modules/connect-mongo/lib/connect-mongo.js:161:23 Error: Error setting TTL index on collection : sessions ^ throw message; /home/bae/app/.bae/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/connection/base.js:242  </description>
    </item>
    
  </channel>
</rss>
